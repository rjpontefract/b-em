/*
 *  B-Em
 *  This file (C) 2025 'Diminished'
 *
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the GNU General Public License as published by
 *  the Free Software Foundation; either version 2 of the License, or
 *  (at your option) any later version.
 *
 *  This program is distributed in the hope that it will be useful,
 *  but WITHOUT ANY WARRANTY; without even the implied warranty of
 *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *  GNU General Public License for more details.
 *
 *  You should have received a copy of the GNU General Public License along
 *  with this program; if not, write to the Free Software Foundation, Inc.,
 *  51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
 */

#ifdef TAPECTRL_LABELS_H
#error tapectrl_labels.h included twice
#endif

#define TAPECTRL_LABELS_H

/*
 * -------------------------------
 * HOW TO MAKE A NEW SET OF LABELS
 * -------------------------------
 *
 * The font was Google's Roboto Regular.
 *
 * These labels are manufactured using the following procedure. It
 * is rather crude but this is how it is done. Summarising:
 *
 * - Use imagemagick on a Linux machine to generate 2-bit greyscale
 *   bitmaps (.gray files) from text based on a font;
 *
 * - Crudely convert these .gray files into source code with a
 *   bad C program.
 *
 * The bad C program is called mksource.c. It will output crude ASCII
 * representation of each label on stderr for examination, while sending
 * C source code to stdout, for inclusion within this B-Em file
 * (tapectrl-labels.h).
 *
 * mksource.c is here:
 *
 */

/*
    #include <stdio.h>

    // pipe each N.gray file to this program
    // ASCII visible output will be on stderr
    // C source code will be on stdout
    // peace

    #define WIDTH 40  // MUST MATCH THE .gray FILES!

    #define CODE_INDENT "    "

    int main(void) {
        int x,y,i;
        unsigned char b;
        printf("%s",CODE_INDENT);
        for (y=0,i=0; (EOF!=i); y++) {
            int x;
            char *slash;
            printf("\"");
            // each byte is 4 pixels
            for (x=0; x<WIDTH; x+=4) {
                int z;
                i = getchar();
                if (EOF == i) { break; }
                printf("\\x%02x", i);
                for (z=0;z<4;z++,i<<=2) {
                    unsigned char b,c;
                    b = i&0xc0;
                    c=((0xc0==b)?'#':0)|((0x80==b)?'o':0)|((0x40==b)?'.':0)|(b?0:' ');
                    fprintf(stderr, "%c", c);
                }
            }
            fprintf(stderr, "\n");
            // if placing strings into a #define, need slashes before line breaks
            slash = "\\"; // ="";
            printf("\" %s\n%s", slash, CODE_INDENT);
        }
        return 0;
    }
    */

/*
 * Build the above C program and name the binary mksource, then
 * use this bash script to generate the labels using
 * imagemagick. You should end up with 0.gray, 1.gray, 2.gray
 * etc., as well as 0-src.txt, 1-src.txt, 2-src.txt and so on.
 *
 * Here is mklabels.sh:
 */

/*
    #!/bin/bash

    WIDTH=40 # this needs to match the value in the C decoder
    HEIGHT=16
    FONT="/usr/share/fonts/google-roboto/Roboto-Black.ttf"
    FONTSIZE=17
    CONVERT=magick

    rm *.gray
    rm *-src.txt

    LABELS="tone data end 300 DCD REC"
    TOP_CROP=2
    N=0

    W=$WIDTH
    H=$[ $HEIGHT + $TOP_CROP ]

    for T in ${LABELS} ; do
        "${CONVERT}" \
        -size "${W}"x"${H}" \
        -background black \
        -transparent-color black \
        -fill white \
        -pointsize "${FONTSIZE}" \
        -font "${FONT}" label:"${T}" +dither \
        -gravity West \
        -gravity North \
        -posterize 4 \
        -colorspace gray \
        -depth 2 \
        -chop 0x${TOP_CROP} \
        "${N}".gray

        # now use the C source code generator, mksource.c
        # NOTE THAT DIMENSIONS IN mksource.c MUST MATCH $WIDTH and $HEIGHT IN HERE
        cat "${N}".gray | ./mksource > "${N}"-src.txt
        echo ''

        N=$[$N+1]
    done
*/

/*
 * The contents of the generated *-src.txt files then need to
 * be pasted crudely into this here .h file. This final part of the
 * procedure is not very good and would benefit from improvement.
 */

/*
 *
 * Labels are 2-bit greyscale (4 shades).
 *
 */

#define TAPECTRL_LABEL_TONE \
    "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00" \
    "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00" \
    "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00" \
    "\x1d\x00\x00\x00\x00\x00\x00\x00\x00\x00" \
    "\x1d\x00\x00\x00\x00\x00\x00\x00\x00\x00" \
    "\xff\xc0\xbe\x40\xa7\xe4\x02\xf9\x00\x00" \
    "\x1d\x03\xd6\xd0\xb9\x6c\x0b\x5b\x00\x00" \
    "\x1d\x07\x40\xb0\xb0\x1d\x1d\x03\x80\x00" \
    "\x1d\x0a\x00\x74\xa0\x1d\x2c\x02\x80\x00" \
    "\x1d\x0e\x00\x74\xa0\x1d\x2f\xff\xc0\x00" \
    "\x1d\x0a\x00\x74\xa0\x1d\x2d\x55\x40\x00" \
    "\x1d\x07\x40\xb0\xa0\x1d\x1d\x00\x00\x00" \
    "\x0e\x43\xd6\xd0\xa0\x1d\x0b\x57\x40\x00" \
    "\x0b\xc0\xbe\x40\xa0\x1d\x02\xfd\x00\x00" \
    "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00" \
    "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"

#define TAPECTRL_LABEL_DATA \
    "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00" \
    "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00" \
    "\x00\x07\x40\x00\x00\x00\x00\x00\x00\x00" \
    "\x00\x07\x40\x00\x00\x70\x00\x00\x00\x00" \
    "\x00\x07\x40\x00\x00\x70\x00\x00\x00\x00" \
    "\x07\xe7\x40\xbe\x43\xfe\x06\xf9\x00\x00" \
    "\x1e\x5f\x43\x96\xd0\xb4\x1e\x5b\x00\x00" \
    "\x38\x07\x41\x00\xe0\x70\x04\x03\x40\x00" \
    "\x34\x07\x40\xaf\xe0\x70\x06\xff\x40\x00" \
    "\x74\x07\x43\x90\xe0\x70\x1e\x47\x40\x00" \
    "\x34\x07\x47\x00\xe0\x70\x2c\x03\x40\x00" \
    "\x38\x07\x47\x01\xe0\x70\x2c\x07\x40\x00" \
    "\x1e\x5f\x43\x97\xe0\x79\x1e\x6f\x40\x00" \
    "\x07\xe7\x41\xbd\xa0\x2e\x07\xe6\x80\x00" \
    "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00" \
    "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"

#define TAPECTRL_LABEL_EOF \
    "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00" \
    "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00" \
    "\x00\x00\x00\x00\x00\x00\x28\x00\x00\x00" \
    "\x00\x00\x00\x00\x00\x00\x28\x00\x00\x00" \
    "\x00\x00\x00\x00\x00\x00\x28\x00\x00\x00" \
    "\x06\xf8\x0a\xbe\x40\x6f\xa8\x00\x00\x00" \
    "\x1e\x5e\x0b\x96\xc0\xf5\xb8\x00\x00\x00" \
    "\x38\x07\x0a\x01\xc1\xd0\x38\x00\x00\x00" \
    "\x34\x07\x4a\x01\xd2\xc0\x28\x00\x00\x00" \
    "\x7f\xff\x4a\x01\xd2\x80\x28\x00\x00\x00" \
    "\x79\x55\x0a\x01\xd2\xc0\x28\x00\x00\x00" \
    "\x38\x00\x0a\x01\xd1\xd0\x38\x00\x00\x00" \
    "\x1e\x5b\x0a\x01\xd0\xf5\xb8\x00\x00\x00" \
    "\x06\xf9\x0a\x01\xd0\x6f\xa8\x00\x00\x00" \
    "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00" \
    "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"

#define TAPECTRL_LABEL_300 \
    "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00" \
    "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00" \
    "\x06\xf8\x00\xbe\x40\x1b\xe0\x00\x00\x00" \
    "\x2d\x5e\x02\xd6\xd0\x79\x7c\x00\x00\x00" \
    "\x38\x07\x47\x40\xa0\xb0\x1d\x00\x00\x00" \
    "\x00\x07\x47\x00\xb0\xe0\x0e\x00\x00\x00" \
    "\x00\x1e\x07\x00\x70\xe0\x0e\x00\x00\x00" \
    "\x02\xf8\x0b\x00\x70\xe0\x0e\x00\x00\x00" \
    "\x00\x5e\x07\x00\x70\xe0\x0e\x00\x00\x00" \
    "\x00\x07\x47\x00\x70\xe0\x0e\x00\x00\x00" \
    "\x10\x03\x47\x00\xb0\xe0\x0e\x00\x00\x00" \
    "\x38\x07\x43\x40\xa0\xb0\x1d\x00\x00\x00" \
    "\x2e\x5e\x02\xd6\xd0\x79\x7c\x00\x00\x00" \
    "\x06\xf8\x00\xbe\x40\x1b\xe0\x00\x00\x00" \
    "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00" \
    "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"

#define TAPECTRL_LABEL_DCD \
    "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00" \
    "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00" \
    "\x2f\xf9\x00\x06\xf9\x01\xff\x90\x00\x00" \
    "\x2d\x5b\x80\x2e\x5b\x41\xd5\xb8\x00\x00" \
    "\x2c\x01\xd0\x78\x02\xc1\xd0\x1e\x00\x00" \
    "\x2c\x00\xe0\xb0\x01\xd1\xd0\x0b\x00\x00" \
    "\x2c\x00\xb0\xb0\x00\x01\xd0\x07\x40\x00" \
    "\x2c\x00\x70\xe0\x00\x01\xd0\x07\x40\x00" \
    "\x2c\x00\x70\xe0\x00\x01\xd0\x07\x40\x00" \
    "\x2c\x00\xb0\xb0\x00\x01\xd0\x07\x40\x00" \
    "\x2c\x00\xe0\xb0\x01\xd1\xd0\x0b\x00\x00" \
    "\x2c\x01\xd0\x78\x02\xc1\xd0\x1e\x00\x00" \
    "\x2d\x5b\x80\x2e\x5b\x41\xd5\xb8\x00\x00" \
    "\x2f\xf9\x00\x06\xf9\x01\xff\x90\x00\x00" \
    "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00" \
    "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"

#define TAPECTRL_LABEL_REC \
    "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00" \
    "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00" \
    "\x2f\xfe\x00\xff\xfd\x01\xbe\x40\x00\x00" \
    "\x2d\x57\xc0\xe5\x54\x0b\x96\xd0\x00\x00" \
    "\x2c\x01\xd0\xd0\x00\x1e\x00\xb0\x00\x00" \
    "\x2c\x00\xe0\xd0\x00\x2c\x00\x74\x00\x00" \
    "\x2c\x00\xe0\xd0\x00\x28\x00\x00\x00\x00" \
    "\x2c\x06\xc0\xff\xf8\x38\x00\x00\x00\x00" \
    "\x2f\xfe\x40\xe5\x50\x38\x00\x00\x00\x00" \
    "\x2d\x5e\x00\xd0\x00\x28\x00\x00\x00\x00" \
    "\x2c\x07\x40\xd0\x00\x2c\x00\x74\x00\x00" \
    "\x2c\x03\x80\xd0\x00\x1e\x00\xb0\x00\x00" \
    "\x2c\x01\xd0\xe5\x54\x0b\x96\xd0\x00\x00" \
    "\x2c\x00\xb0\xff\xfe\x01\xbe\x40\x00\x00" \
    "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00" \
    "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"
